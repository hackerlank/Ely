<?xml version="1.0"?>
<Game>
	<!-- ------------------------------------------------ -->
	<!-- ------------------------------------------------ -->
	<!-- 		Object Templates Definitions              -->
	<!-- ------------------------------------------------ -->
	<!-- ------------------------------------------------ -->
	<ObjectTmplSet>
		<!-- template for wrapper around predefined nodepath - Mandatory -->
		<ObjectTmpl type="Render">
			<ComponentTmpl family="Scene" type="NodePathWrapper" priority="200"/>
		</ObjectTmpl>
		
		<ObjectTmpl type="Camera">
			<ComponentTmpl family="Scene" type="NodePathWrapper" priority="200"/>
<!--
			<ComponentTmpl family="Control" type="Chaser" priority="60"/>
-->
			<ComponentTmpl family="Control" type="Driver" priority="60">
				<Param event_types="forward:stop-forward:fast-forward"/>
				<Param event_types="backward:stop-backward:fast-backward"/>
				<Param event_types="strafe_left:stop-strafe_left:fast-strafe_left"/>
				<Param event_types="strafe_right:stop-strafe_right:fast-strafe_right"/>
				<Param event_types="up:stop-up:fast-up"/>
				<Param event_types="down:stop-down:fast-down"/>				
				<Param event_types="fast:stop-fast"/>				
			</ComponentTmpl>
			<ComponentTmpl family="Audio" type="Listener" priority="50"/>
		</ObjectTmpl>
		
		<ObjectTmpl type="Actor">
			<ComponentTmpl family="Behavior" type="Activity" priority="40">
				<Param states="forward:backward"/>
				<Param states="strafe_left:strafe_right"/>
				<Param states="up:down"/>
				<Param from_to="forward_FromTo_strafe_left"/>
				<Param from_to="forward_FromTo_strafe_right"/>
				<Param event_types="forward:stop-forward:fast-forward"/>
				<Param event_types="backward:stop-backward:fast-backward"/>
				<Param event_types="roll_left:stop-roll_left:fast-roll_left"/>
				<Param event_types="roll_right:stop-roll_right:fast-roll_right"/>
				<Param event_types="up:stop-up:fast-up"/>
				<Param event_types="down:stop-down:fast-down"/>
				<Param event_types="fast:stop-fast"/>							
			</ComponentTmpl>
			<ComponentTmpl family="Control" type="Driver" priority="60"/>
			<ComponentTmpl family="Scene" type="Model" priority="100"/>
			<ComponentTmpl family="Audio" type="Sound3d" priority="50"/>
			<ComponentTmpl family="Physics" type="RigidBody" priority="90"/> 
		</ObjectTmpl>

		<ObjectTmpl type="HUD">
			<ComponentTmpl family="Behavior" type="Activity" priority="40">
				<Param states="idle"/>
				<Param states="fire"/>
				<Param event_types="fire:stop-fire"/>
			</ComponentTmpl>
			<ComponentTmpl family="Audio" type="Sound3d" priority="50"/>
			<ComponentTmpl family="Scene" type="Model" priority="100"/>
		</ObjectTmpl>

		<ObjectTmpl type="Character">
			<ComponentTmpl family="Behavior" type="Activity" priority="40">
				<Param states="I:F:B:Sr:Sl:Rr:Rl:J"/>
				<Param states="F-Rr:F-Rl:F-Rr-Rl:Rr-Rl:F-J:B-Rr:B-Rl"/>
				<Param states="Sr-Rr:Sr-Rl:Sl-Rr:Sl-Rl"/>
				<Param states="F-Q:Sr-Q:Sl-Q:Rr-Q:Rl-Q"/>
				<Param states="F-Rr-Q:F-Rl-Q:F-Rr-Rl-Q:Rr-Rl-Q:F-J-Q"/>
				<Param states="Sr-Rr-Q:Sr-Rl-Q:Sl-Rr-Q:Sl-Rl-Q"/>
				<Param event_types="f:f-up:f-q:b:b-up:b-q"/>
				<Param event_types="sr:sr-up:sr-q:sl:sl-up:sl-q"/>
				<Param event_types="rr:rr-up:rr-q:rl:rl-up:rl-q"/>
				<Param event_types="j:j-up:j-q"/>				
				<Param event_types="q:q-up"/>				
				<Param event_types="ground:air"/>				
			</ComponentTmpl>
			<ComponentTmpl family="Scene" type="Model" priority="100"/>
			<ComponentTmpl family="Audio" type="Sound3d" priority="50"/>
			<ComponentTmpl family="Physics" type="CharacterController" priority="90"/> 
		</ObjectTmpl>
		
		<ObjectTmpl type="StaticActor">
			<ComponentTmpl family="Scene" type="Model" priority="100"/>
			<ComponentTmpl family="Physics" type="RigidBody" priority="90"/> 
		</ObjectTmpl>
		
		<!-- templates for instancing -->
		<ObjectTmpl type="Instanceable">
			<ComponentTmpl family="Scene" type="Model" priority="100"/>
		</ObjectTmpl>
		
		<ObjectTmpl type="InstancedActor">
			<ComponentTmpl family="Scene" type="InstanceOf" priority="100"/>
			<ComponentTmpl family="Audio" type="Sound3d" priority="50"/>
			<ComponentTmpl family="Physics" type="RigidBody" priority="90"/> 
		</ObjectTmpl>
		
		<ObjectTmpl type="InstancedActorAI">
			<ComponentTmpl family="Scene" type="InstanceOf" priority="100"/>
			<ComponentTmpl family="AI" type="Steering" priority="40"/>
			<ComponentTmpl family="Audio" type="Sound3d" priority="50"/>
			<ComponentTmpl family="Physics" type="CharacterController" priority="90"/>
			<ComponentTmpl family="Control" type="Driver" priority="60"/>
		</ObjectTmpl>
		
		<ObjectTmpl type="Terrain">
			<ComponentTmpl family="Scene" type="Terrain" priority="100"/>
			<ComponentTmpl family="Physics" type="RigidBody" priority="90"/> 
		</ObjectTmpl>

	</ObjectTmplSet>

	<!-- ------------------------------------------------ -->
	<!-- ------------------------------------------------ -->
	<!-- 		Objects and Scene Creation                -->
	<!-- ------------------------------------------------ -->
	<!-- ------------------------------------------------ -->	
	<ObjectSet>
	
		<Object type="Camera" id="camera" priority="90">
			<Component type="NodePathWrapper">
				<Param nodepath="camera"/>
			</Component>
<!--
			<Component type="Chaser">
				<Param enabled="false"/>
				<Param backward="false"/>
				<Param chased_object="NPC1"/>
				<Param fixed_relative_position="false"/>
				<Param reference_object="render"/>
				<Param abs_max_distance="150.0"/>
				<Param abs_min_distance="100.0"/>
				<Param abs_max_height="100.0"/>
				<Param abs_min_height="50.0"/>
				<Param abs_lookat_distance="0.0"/>
				<Param abs_lookat_height="20.0"/>
				<Param friction="1.0"/>
			</Component>
-->
			<Component type="Driver">
				<Param enabled="false"/>
				<Param linear_speed="50.0"/>
				<Param angular_speed="10.0"/>
				<Param fast_factor="5.0"/>
				<Param roll_left=""/>
				<Param roll_right=""/>
				<Param inverted_keyboard="true"/>
				<Param inverted_mouse="false"/>
				<Param mouse_enabled_h="true"/>
				<Param mouse_enabled_p="true"/>
				<Param events="forward@mouse3:stop-forward@mouse3-up:fast-forward@shift-mouse3"/>
				<Param events="backward@s:stop-backward@s-up:fast-backward@shift-s"/>
				<Param events="strafe_left@a:stop-strafe_left@a-up:fast-strafe_left@shift-a"/>
				<Param events="strafe_right@d:stop-strafe_right@d-up:fast-strafe_right@shift-d"/>
				<Param events="up@r:stop-up@r-up:fast-up@shift-r"/>
				<Param events="down@f:stop-down@f-up:fast-down@shift-f"/>				
				<Param events="fast@shift:stop-fast@shift-up"/>
			</Component>
			<Param parent=""/>
			<Param pos_x="750.0"/>
			<Param pos_y="-300.0"/>
			<Param pos_z="600.0"/>
			<Param rot_p="-15.0"/>
			<Param rot_h="0.0"/>
		</Object>
		
		<Object type="Instanceable" id="Smiley1" priority="100">
			<Component type="Model">
				<Param model_file="smiley"/>
				<Param scale_x="1.0"/>
				<Param scale_y="1.0"/>
				<Param scale_z="1.0"/>
			</Component>
			<Param parent=""/>
			<Param is_steady="true"/>
		</Object>
		<Object type="Instanceable" id="Gorilla1" priority="100">
			<Component type="Model">
				<Param model_file="walk@gorilla/gorillawalking"/>
				<Param scale_x="1.0"/>
				<Param scale_y="1.0"/>
				<Param scale_z="1.0"/>
			</Component>
			<Param parent=""/>
			<Param is_steady="true"/>
		</Object>

		<Object type="InstancedActor" id="InstancedSmiley1">
			<Param parent="render"/>
			<Param is_steady="false"/>
			<Param pos_x="850.0"/>
			<Param pos_y="750.0"/>
			<Param pos_z="400.0"/>
			<Param rot_h="180.0"/>
			<Param rot_p="0.0"/>
			<Param rot_r="0.0"/>
			<Component type="RigidBody">
				<Param body_type="dynamic"/>
				<Param body_mass="1.0"/>
				<Param body_friction="0.8"/>
				<Param body_restitution="0.5"/>
				<Param shape_type="sphere"/>
				<Param shape_size="minimum"/>
				<Param collide_mask="all_on"/>
			</Component> 
			<Component type="InstanceOf">
				<Param instance_of="Smiley1"/>
				<Param scale_x="5.0"/>
				<Param scale_y="5.0"/>
				<Param scale_z="5.0"/>
			</Component>
		</Object>
		
		<Object type="InstancedActorAI" id="Steerer1">
			<Param parent="render"/>
			<Param is_steady="false"/>
			<Param store_params="true"/>
			<Param pos_x="500.0"/>
			<Param pos_y="700.0"/>
			<Param pos_z="350.0"/>
			<Param rot_h="-90.0"/>
			<Param rot_p="0.0"/>
			<Param rot_r="0.0"/>
			<Component type="Steering">
				<Param enabled="false"/>
				<Param throw_events="true"/>
				<Param controlled_type="character_controller"/>
				<Param mass="20.0"/>
				<Param movt_force="0.05"/>
				<Param max_force="5.0"/>
				<Param obstacle_hit_mask="0x80000000"/>
				<Param obstacle_max_distance_fraction="1.5"/>
			</Component>
			<Component type="CharacterController">
				<Param shape_type="capsule"/>
				<Param shape_size="medium"/>
				<Param is_local="false"/>
			</Component>
			<Component type="InstanceOf">
				<Param instance_of="Gorilla1"/>
				<Param scale_x="3.0"/>
				<Param scale_y="3.0"/>
				<Param scale_z="3.0"/>
			</Component>
		</Object>

		<Object type="Actor" id="Actor1"  priority="100">
			<Component type="Activity">
				<Param events="forward@arrow_up:stop-forward@arrow_up-up:fast-forward@shift-arrow_up"/>
				<Param events="backward@arrow_down:stop-backward@arrow_down-up:fast-backward@shift-arrow_down"/>
				<Param events="roll_left@arrow_left:stop-roll_left@arrow_left-up:fast-roll_left@shift-arrow_left"/>
				<Param events="roll_right@arrow_right:stop-roll_right@arrow_right-up:fast-roll_right@shift-arrow_right"/>
				<Param events="up@page_up:stop-up@page_up-up:fast-up@shift-page_up"/>
				<Param events="down@page_down:stop-down@page_down-up:fast-down@shift-page_down"/>
				<Param events="fast@shift:stop-fast@shift-up"/>				
			</Component>
			<Component type="Driver">
				<Param enabled="false"/>
				<Param linear_speed="3.0"/>
				<Param angular_speed="3.0"/>
				<Param fast_factor="15.0"/>
				<Param inverted_keyboard="false"/>
				<Param inverted_mouse="false"/>
				<Param mouse_enabled_h="true"/>
				<Param mouse_enabled_p="false"/>
			</Component>
			<Component type="Model">
				<Param model_file="panda"/>
				<Param anim_files="walk@panda-walk"/>
				<Param scale_x="3.0"/>
				<Param scale_y="3.0"/>
				<Param scale_z="3.0"/>
			</Component>
			<Component type="RigidBody">
				<Param body_type="dynamic"/>
				<Param body_mass="1.0"/>
				<Param body_friction="0.8"/>
				<Param body_restitution="0.1"/>
				<Param shape_type="capsule"/>
				<Param shape_size="maximum"/>
				<Param collide_mask="all_on"/>
			</Component> 
			<Component type="Sound3d">
				<Param sound_files="walk-sound@audio/sfx/GUI_rollover.wav"/>
			</Component>
			<Param parent="render"/>			
			<Param pos_x="800.0"/>
			<Param pos_y="750.0"/>
			<Param pos_z="400.0"/>
			<Param rot_h="180.0"/>
			<Param rot_p="0.0"/>
			<Param rot_r="0.0"/>
		</Object>

		<Object type="HUD" id="hud1">
			<Component type="Activity">
				<Param events="fire@mouse1:stop-fire@mouse1-up"/>
			</Component>
			<Component type="Model">
				<Param model_file="misc/lilsmiley"/>
				<Param scale_x="0.05"/>
				<Param scale_y="0.05"/>
				<Param scale_z="0.05"/>
			</Component>
			<Component type="Sound3d">
				<Param sound_files="video-sound@audio/sfx/GUI_rollover.wav"/>
			</Component>
			<Param parent="aspect2d"/>
			<Param pos_x="0.0"/>
			<Param pos_y="0.0"/>
			<Param pos_z="-0.75"/>
			<Param rot_h="0.0"/>
			<Param rot_p="0.0"/>
			<Param rot_r="90.0"/>
		</Object>

		<Object type="Character" id="NPC1"  priority="100">
			<Component type="Activity">
				<Param events="f@i:f-up@i-up:f-q@alt-i"/>
				<Param events="b@k:b-up@k-up:b-q@alt-k"/>
				<Param events="sr@o:sr-up@o-up:sr-q@alt-o"/>
				<Param events="sl@u:sl-up@u-up:sl-q@alt-u"/>
				<Param events="rr@l:rr-up@l-up:rr-q@alt-l"/>
				<Param events="rl@j:rl-up@j-up:rl-q@alt-j"/>
				<Param events="j@space:j-up@space-up:j-q@alt-space"/>				
				<Param events="q@alt:q-up@alt-up"/>				
				<Param events="ground@OnGround:air@OnAir"/>				
			</Component>
			<Component type="Model">
				<Param model_file="eve/eve"/>
				<Param anim_files="jump@eve/eve-jump:run@eve/eve-run:walk@eve/eve-walk:offbalance@eve/eve-offbalance"/>
				<Param scale_x="5.0"/>
				<Param scale_y="5.0"/>
				<Param scale_z="5.0"/>
			</Component>
			<Component type="CharacterController">
				<Param throw_events="true"/>
				<Param collide_mask="0x7FFFFFFF"/>
				<Param shape_type="capsule"/>
				<Param shape_size="medium"/>
				<Param linear_speed="120.0"/>
				<Param jump_speed="30.0"/>
			</Component> 
			<Component type="Sound3d">
				<Param sound_files="walk-sound@models/audio/sfx/GUI_click.wav"/>
			</Component>
			<Param parent="render"/>
			<Param pos_x="750.0"/>
			<Param pos_y="800.0"/>
			<Param pos_z="350.0"/>
			<Param rot_h="180.0"/>
			<Param rot_p="0.0"/>
			<Param rot_r="0.0"/>
		</Object>

		<Object type="Terrain" id="Terrain1">
			<Component type="Terrain">
				<Param heightfield_file="../PandaGame/Models/heightfield.png"/>
				<Param texture_file="terrain.png"/>
				<Param height_scale="500.0"/>
				<Param width_scale="15.0"/>
				<Param brute_force="true"/>
				<Param auto_flatten="AFM_off"/>
				<Param focal_point="camera"/>
				<Param minimum_level="0"/>
				<Param near_percent="0.1"/>
				<Param far_percent="0.7"/>
			</Component>
			<Component type="RigidBody">
				<Param body_type="static"/>
				<Param shape_heightfield_file="../PandaGame/Models/heightfield.png"/>
				<Param shape_type="heightfield"/>
				<Param shape_height="500.0"/>
				<Param shape_scale_w="15.0"/>
				<Param shape_scale_d="15.0"/>
				<Param shape_up="z"/>
				<Param collide_mask="0x7FFFFFFF"/>
			</Component> 
			<Param parent="render"/>
		</Object>

<!--
		<Object type="StaticActor" id="Plane1">
			<Component type="Model">
				<Param from_file="false"/>
				<Param model_type="card"/>
				<Param model_card_left="-1000.0"/>
				<Param model_card_right="1000.0"/>
				<Param model_card_bottom="-1000.0"/>
				<Param model_card_top="1000.0"/>
			</Component>
			<Component type="RigidBody">
				<Param body_type="static"/>
				<Param body_friction="0.9"/>
				<Param body_restitution="0.2"/>
				<Param shape_type="plane"/>
				<Param shape_norm_x="0.0"/>
				<Param shape_norm_y="-1.0"/>
				<Param shape_norm_z="0.0"/>
				<Param shape_d="0.0"/>
				<Param collide_mask="0x7FFFFFFF"/>
			</Component> 
			<Param parent="render"/>
			<Param is_steady="true"/>
			<Param rot_p="-90.0"/>
		</Object>
-->
		
		<Object type="StaticActor" id="beachhouse2">
			<Component type="Model">
				<Param from_file="true"/>
				<Param model_file="buildings/beachhouse2"/>
				<Param scale_x="8.0"/>
				<Param scale_y="8.0"/>
				<Param scale_z="8.0"/>
			</Component>
			<Component type="RigidBody">
				<Param body_type="static"/>
				<Param body_friction="0.9"/>
				<Param body_restitution="0.2"/>
				<Param shape_type="triangle_mesh"/>
			</Component> 
			<Param parent="render"/>
			<Param is_steady="true"/>
			<Param rot_h="-45.0"/>
			<Param pos_x="623.0"/>
			<Param pos_y="849.0"/>
			<Param pos_z="218.0"/>
		</Object>

		<Object type="StaticActor" id="gazebo">
			<Component type="Model">
				<Param from_file="true"/>
				<Param model_file="buildings/gazebo"/>
				<Param scale_x="6.0"/>
				<Param scale_y="6.0"/>
				<Param scale_z="6.0"/>
			</Component>
			<Component type="RigidBody">
				<Param body_type="static"/>
				<Param body_friction="0.9"/>
				<Param body_restitution="0.2"/>
				<Param shape_type="triangle_mesh"/>
			</Component> 
			<Param parent="render"/>
			<Param is_steady="true"/>
			<Param rot_h="0.0"/>
			<Param pos_x="675.0"/>
			<Param pos_y="620.0"/>
			<Param pos_z="248.0"/>
		</Object>
		
		<Object type="StaticActor" id="cityhall">
			<Component type="Model">
				<Param from_file="true"/>
				<Param model_file="buildings/cityhall"/>
				<Param scale_x="8.0"/>
				<Param scale_y="8.0"/>
				<Param scale_z="8.0"/>
			</Component>
			<Component type="RigidBody">
				<Param body_type="static"/>
				<Param body_friction="0.9"/>
				<Param body_restitution="0.2"/>
				<Param shape_type="triangle_mesh"/>
			</Component> 
			<Param parent="render"/>
			<Param is_steady="true"/>
			<Param rot_h="105.0"/>
			<Param pos_x="3404.0"/>
			<Param pos_y="2800.0"/>
			<Param pos_z="-243.0"/>
		</Object>

		<Object type="StaticActor" id="bridge">
			<Component type="Model">
				<Param from_file="true"/>
				<Param model_file="buildings/bridge"/>
				<Param scale_x="0.33"/>
				<Param scale_y="0.1"/>
				<Param scale_z="0.1"/>
			</Component>
			<Component type="RigidBody">
				<Param body_type="static"/>
				<Param body_friction="0.9"/>
				<Param body_restitution="0.2"/>
				<Param shape_type="triangle_mesh"/>
			</Component> 
			<Param parent="render"/>
			<Param is_steady="true"/>
			<Param rot_h="100.0"/>
			<Param rot_p="5.0"/>
			<Param rot_r="3.5"/>
			<Param pos_x="694.0"/>
			<Param pos_y="1747.0"/>
			<Param pos_z="136.0"/>
		</Object>
		
		<!-- wrapper around render(s) nodepath(s) - Mandatory -->
		<Object type="Render" id="render" priority="1000">
			<Component type="NodePathWrapper">
				<Param nodepath="render"/>
			</Component>
			<Param parent=""/>
		</Object>
		<Object type="Render" id="render2d" priority="1000">
			<Component type="NodePathWrapper">
				<Param nodepath="render2d"/>
			</Component>
			<Param parent=""/>
		</Object>
		<Object type="Render" id="aspect2d" priority="1000">
			<Component type="NodePathWrapper">
				<Param nodepath="aspect2d"/>
			</Component>
			<Param parent=""/>
		</Object>
		
	</ObjectSet>
</Game>
